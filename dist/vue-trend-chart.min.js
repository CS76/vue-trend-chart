!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("timers")):"function"==typeof define&&define.amd?define(["timers"],e):(t=t||self)["vue-trend-chart"]=e()}(this,function(){"use strict";function e(t){var e=t.split(" ").filter(function(t){return""!==t}).map(function(t){return parseInt(t)});return!(e.length<1||4<e.length)&&e.every(function(t){return"number"==typeof t&&0<=t})}function t(t){var e=t.split(" ").filter(function(t){return""!==t}).map(function(t){return parseInt(t)});switch(e.length){case 4:return{top:e[0],right:e[1],bottom:e[2],left:e[3]};case 3:return{top:e[0],right:e[1],bottom:e[2],left:e[1]};case 2:return{top:e[0],right:e[1],bottom:e[0],left:e[1]};default:return{top:e[0],right:e[0],bottom:e[0],left:e[0]}}}var r={name:"TrendChartGrid",props:{xAxes:{default:!1,type:Boolean},xAxesLines:{type:Number},xAxesStrokeWidth:{default:1,type:Number},xAxesStrokeColor:{default:"black",type:String},xAxesStrokeDasharray:{default:null,type:String},yAxes:{default:!1,type:Boolean},yAxesLines:{type:Number},yAxesStrokeWidth:{default:1,type:Number},yAxesStrokeColor:{default:"black",type:String},yAxesStrokeDasharray:{default:null,type:String},padding:{default:"0",type:String,validator:function(t){return e(t)}}},computed:{xLines:function(){return this.xAxesLines||this.$parent.params.maxAmount},boundary:function(){return this.$parent.boundary},gridPaddingObject:function(){return this.$parent.gridPaddingObject}},methods:{setXLineParams:function(t){var e=this,r=e.boundary,n=e.xLines,i=e.gridPaddingObject,a=e.xAxesStrokeColor,o=e.xAxesStrokeWidth,s=e.xAxesStrokeDasharray,l=(r.maxX-r.minX)/(n-1),d=r.minX+l*(t-1);return{x1:d,x2:d,y1:r.minY-i.top,y2:r.maxY+i.bottom,stroke:a,"stroke-width":o,"stroke-dasharray":s}},setYLineParams:function(t){var e=this,r=e.boundary,n=e.yAxesLines,i=e.gridPaddingObject,a=e.yAxesStrokeColor,o=e.yAxesStrokeWidth,s=e.yAxesStrokeDasharray,l=(r.maxY-r.minY)/(n-1),d=r.minY+l*(t-1);return{x1:r.minX-i.left,x2:r.maxX+i.right,y1:d,y2:d,stroke:a,"stroke-width":o,"stroke-dasharray":s}}}};function n(t,e,r,n,i,a,o,s,l,d){"function"==typeof o&&(l=s,s=o,o=!1);var u,c="function"==typeof r?r.options:r;if(t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),n&&(c._scopeId=n),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):e&&(u=o?function(){e.call(this,d(this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),u)if(c.functional){var h=c.render;c.render=function(t,e){return u.call(e),h(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return r}var i=r;r.__file="/Users/dmytrobarylo/Desktop/vue-trend-chart/src/components/trend-chart-grid.vue";var a=function(){var r=this,t=r.$createElement,n=r._self._c||t;return r.xAxes||r.yAxes?n("g",[r.xAxes&&0<r.xLines?n("g",{staticClass:"trend-chart-grid-x"},r._l(r.xLines,function(t,e){return n("line",r._b({key:e,staticClass:"trend-chart-grid-x-axis"},"line",r.setXLineParams(t),!1))}),0):r._e(),r._v(" "),r.yAxes&&0<r.yAxesLines?n("g",{staticClass:"trend-chart-grid-y"},r._l(r.yAxesLines,function(t,e){return n("line",r._b({key:e,staticClass:"trend-chart-grid-y-axis"},"line",r.setYLineParams(t),!1))}),0):r._e()]):r._e()},o=(a._withStripped=!0,n({render:a,staticRenderFns:[]},void 0,i,void 0,!1,void 0,void 0,void 0)),s={name:"TrendChartLabels",props:{xLabels:{type:Array},xLabelsPosition:{default:"bottom",type:String,validator:function(t){return-1!==["top","bottom"].indexOf(t)}},xLabelsOffset:{default:5,type:Number},yLabelsAmount:{type:Number},yLabelsPosition:{default:"left",type:String,validator:function(t){return-1!==["left","right"].indexOf(t)}},yLabelsOffset:{default:5,type:Number},yLabelsTextFormatter:{default:function(t){return t},type:Function}},computed:{boundary:function(){return this.$parent.boundary},gridPaddingObject:function(){return this.$parent.gridPaddingObject}},methods:{setXLabelsParams:function(t){var e=this,r=e.boundary,n=e.gridPaddingObject,i=e.xLabels,a=e.xLabelsPosition,o=e.xLabelsOffset,s=(r.maxX-r.minX)/(i.length-1);return{x:r.minX+s*t,y:"bottom"==a?r.maxY+n.bottom+o:r.minY-n.top-o}},setYLabelsParams:function(t){var e=this,r=e.boundary,n=e.gridPaddingObject,i=e.yLabelsAmount,a=e.yLabelsPosition,o=e.yLabelsOffset,s=(r.maxY-r.minY)/(i-1);return{x:"left"==a?r.minX-n.left-o:r.maxX+n.right+o,y:r.maxY-s*t}}}},l=s;s.__file="/Users/dmytrobarylo/Desktop/vue-trend-chart/src/components/trend-chart-labels.vue";var d=function(){var r=this,t=r.$createElement,n=r._self._c||t;return r.xLabels&&r.xLabels.length||r.yLabelsAmount&&0<r.yLabelsAmount?n("g",[r.xLabels&&r.xLabels.length?n("g",{staticClass:"trend-chart-labels-x"},r._l(r.xLabels,function(t,e){return n("text",r._b({key:e,staticClass:"trend-chart-label-x",attrs:{"text-anchor":"middle","dominant-baseline":"bottom"==r.xLabelsPosition?"text-before-edge":"text-after-edge"}},"text",r.setXLabelsParams(e),!1),[r._v(r._s(t))])}),0):r._e(),r._v(" "),r.yLabelsAmount&&0<r.yLabelsAmount?n("g",{staticClass:"trend-chart-labels-y"},r._l(r.yLabelsAmount,function(t,e){return n("text",r._b({key:e,staticClass:"trend-chart-label-y",attrs:{"text-anchor":"left"==r.yLabelsPosition?"end":"start","dominant-baseline":"middle"},domProps:{textContent:r._s(r.yLabelsTextFormatter(r.$parent.params.minValue+(r.$parent.params.maxValue-r.$parent.params.minValue)/(r.yLabelsAmount-1)*(t-1)))}},"text",r.setYLabelsParams(e),!1))}),0):r._e()]):r._e()},u=(d._withStripped=!0,n({render:d,staticRenderFns:[]},void 0,l,void 0,!1,void 0,void 0,void 0));var c={name:"TrendChartCurve",props:{data:{required:!0,type:Array},className:{type:String},smooth:{default:!1,type:Boolean},stroke:{default:!0,type:Boolean},strokeWidth:{default:1,type:Number},strokeColor:{default:"black",type:String},strokeGradient:{type:Array},strokeGradientDirection:{default:"to top",type:String,validator:function(t){return-1!==["to top","to left","to bottom","to right"].indexOf(t)}},strokeDasharray:{default:"none",type:String},fill:{default:!1,type:Boolean},fillColor:{default:"black",type:String},fillGradient:{type:Array},fillGradientDirection:{default:"to top",type:String,validator:function(t){return-1!==["to top","to left","to bottom","to right"].indexOf(t)}},fillOpacity:{default:1,type:Number},showPoints:{default:!1,type:Boolean},pointsRadius:{default:2,type:Number},pointsFill:{default:"black",type:String},pointsStrokeWidth:{type:Number},pointsStrokeColor:{type:String}},computed:{points:function(){return function(t,e,r,n,i){var a=e.minX,o=e.minY,s=e.maxX,l=e.maxY;t=t.map(function(t){return"number"==typeof t?t:t.value});var d=n-.001,u=(s-a)/(i-1),c=(l-o)/(r+.001-d);return t.map(function(t,e){return{x:e*u+a,y:l-(t-d)*c+1e-5*+(e===i-1)-1e-5*+(0===e)}})}(this.data,this.$parent.boundary,this.$parent.params.maxValue,this.$parent.params.minValue,this.$parent.params.maxAmount)},paths:function(){return function(t,n,e){var r=e.maxY,i=[].concat(t),a=i.shift(),o=i[i.length-1],s=(i[0].x-a.x)/2,l="M "+a.x+","+a.y;i.forEach(function(t,e){if(n){var r=i[e-1]||a;l+=" C "+(s+r.x)+","+r.y+" "+(s+r.x)+","+t.y+" "+t.x+","+t.y}else l+=" L"+t.x+","+t.y});var d=l;return o.Y!==r&&(d+=" L"+o.x+","+r),a.Y!==r&&(d+=" L"+a.x+","+r),{linePath:l,fillPath:d+=" Z"}}(this.points,this.smooth,this.$parent.boundary)},strokeGradientId:function(){return"vueTrendStrokeGradient"+this._uid},fillGradientId:function(){return"vueTrendFillGradient"+this._uid}},methods:{getGradientDirection:function(t){switch(t){case"to left":return{x1:0,y1:0,x2:1,y2:0};case"to bottom":return{x1:0,y1:0,x2:0,y2:1};case"to right":return{x1:1,y1:0,x2:0,y2:0};default:return{x1:0,y1:1,x2:0,y2:0}}}}},h=c;c.__file="/Users/dmytrobarylo/Desktop/vue-trend-chart/src/components/trend-chart-curve.vue";var f=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("g",{class:r.className},[r.fill&&r.paths&&r.paths.fillPath?n("path",{staticClass:"trend-chart-fill",attrs:{d:r.paths.fillPath,fill:r.fillGradient?"url(#"+r.fillGradientId+")":r.fillColor,opacity:r.fillOpacity}}):r._e(),r._v(" "),r.stroke&&r.paths&&r.paths.linePath?n("path",{staticClass:"trend-chart-stroke",attrs:{d:r.paths.linePath,fill:"none",stroke:r.strokeGradient?"url(#"+r.strokeGradientId+")":r.strokeColor,"stroke-width":r.strokeWidth,"stroke-dasharray":r.strokeDasharray}}):r._e(),r._v(" "),r.showPoints?n("g",{staticClass:"trend-chart-points"},r._l(r.points,function(t,e){return n("circle",{key:e,staticClass:"trend-chart-point",attrs:{cx:t.x,cy:t.y,r:r.pointsRadius,fill:r.pointsFill,stroke:r.pointsStrokeColor,"stroke-width":r.pointsStrokeWidth}})}),0):r._e(),r._v(" "),r.strokeGradient||r.fillGradient?n("defs",[r.strokeGradient?n("linearGradient",r._b({attrs:{id:r.strokeGradientId}},"linearGradient",r.getGradientDirection(r.strokeGradientDirection),!1),r._l(r.strokeGradient,function(t,e){return n("stop",{key:e,attrs:{offset:e/r.strokeGradient.length,"stop-color":t}})}),1):r._e(),r._v(" "),r.fillGradient?n("linearGradient",r._b({attrs:{id:r.fillGradientId}},"linearGradient",r.getGradientDirection(r.fillGradientDirection),!1),r._l(r.fillGradient,function(t,e){return n("stop",{key:e,attrs:{offset:e/r.fillGradient.length,"stop-color":t}})}),1):r._e()],1):r._e()])},p=(f._withStripped=!0,{name:"TrendChart",components:{TrendChartGrid:o,TrendChartLabels:u,TrendChartCurve:n({render:f,staticRenderFns:[]},void 0,h,void 0,!1,void 0,void 0,void 0)},props:{datasets:{required:!0,type:Array},grid:{default:null,type:Object},labels:{default:null,type:Object},max:{type:Number},min:{type:Number},padding:{default:"5",type:String,validator:function(t){return e(t)}}},data:function(){return{width:null,height:null,labelsOverflowObject:{top:0,right:0,bottom:0,left:0}}},computed:{paddingObject:function(){return this.padding?t(this.padding):t("0")},gridPaddingObject:function(){return this.grid&&this.grid.padding?t(this.grid.padding):t("0")},boundary:function(){var t=this,e=t.width,r=t.height,n=t.paddingObject,i=t.gridPaddingObject,a=t.labelsOverflowObject,o={minX:n.left+i.left+a.left,minY:n.top+i.top+a.top,maxX:e-n.right-i.right-a.right,maxY:r-n.bottom-i.bottom-a.bottom};return o},params:function(){var i=-1/0,a=1/0,o=0;return this.datasets.forEach(function(t){var e=t.data.map(function(t){return"number"==typeof t?t:t.value}),r=Math.max.apply(Math,e);i<r&&(i=r);var n=Math.min.apply(Math,e);n<a&&(a=n),e.length>o&&(o=e.length)}),void 0!==this.max&&this.max>i&&(i=this.max),void 0!==this.min&&this.min<a&&(a=this.min),{maxValue:i,minValue:a,maxAmount:o}}},methods:{setSize:function(){var t=this.$refs.chart.getBoundingClientRect();this.width=t.width,this.height=t.height},fitLabels:function(){var t=this.$refs.chart,e=this.$refs["chart-labels"];if(e&&(e.xLabels&&e.xLabels.length||0<e.yLabelsAmount)){var r=t.getBoundingClientRect();console.log(r.width,r.height);var n=e.$el.getBoundingClientRect();console.log(n.width,n.height);var i=r.top-n.top+this.paddingObject.top,a=n.right-r.right+this.paddingObject.right,o=n.bottom-r.bottom+this.paddingObject.bottom,s=this.paddingObject.left-n.left+r.left;console.log(i,a,o,s),this.labelsOverflowObject={top:0<i?i:0,right:0<a?a:0,bottom:0<o?o:0,left:0<s?s:0}}else this.labelsOverflowObject={top:0,right:0,bottom:0,left:0}},init:function(){var t=this;this.setSize(),this.$nextTick(function(){t.fitLabels()})},onWindowResize:function(){this.setSize()}},mounted:function(){this.init(),window.addEventListener("resize",this.onWindowResize)},destroyed:function(){window.removeEventListener("resize",this.onWindowResize)}}),m=p;p.__file="/Users/dmytrobarylo/Desktop/vue-trend-chart/src/components/trend-chart.vue";var y=function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("svg",{ref:"chart",staticClass:"trend-chart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"}},[r.grid?n("trend-chart-grid",r._b({staticClass:"trend-chart-grid"},"trend-chart-grid",r.grid,!1)):r._e(),r._v(" "),r.labels?n("trend-chart-labels",r._b({ref:"chart-labels",staticClass:"trend-chart-labels"},"trend-chart-labels",r.labels,!1)):r._e(),r._v(" "),r._l(r.datasets,function(t,e){return n("trend-chart-curve",r._b({key:e,staticClass:"trend-chart-curve"},"trend-chart-curve",t,!1))})],2)},b=(y._withStripped=!0,n({render:y,staticRenderFns:[]},void 0,m,void 0,!1,void 0,void 0,void 0));return b.install=function(t){t.component(b.name,b)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(b),b});
